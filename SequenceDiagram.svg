<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="561px" preserveAspectRatio="none" style="width:745px;height:561px;background:#808080;" version="1.1" viewBox="0 0 745 561" width="745px" zoomAndPan="magnify"><defs><filter height="300%" id="fbaa4rwk21b9r" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#DDDDDD" height="546.5859" style="stroke: #A80036; stroke-width: 1.0;" width="341.5" x="351.5" y="4"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="47" x="498.75" y="16.0669">Server</text><rect fill="#FFFFFF" filter="url(#fbaa4rwk21b9r)" height="375.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="31.5" y="89.5625"/><rect fill="#FFFFFF" filter="url(#fbaa4rwk21b9r)" height="434.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="219.5" y="68.4297"/><rect fill="#FFFFFF" filter="url(#fbaa4rwk21b9r)" height="413.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="407.5" y="89.5625"/><rect fill="#FFFFFF" filter="url(#fbaa4rwk21b9r)" height="275.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="633.5" y="219.0938"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="36" x2="36" y1="58.4297" y2="512.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="224" x2="224" y1="58.4297" y2="512.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="412.5" x2="412.5" y1="58.4297" y2="512.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="638" x2="638" y1="58.4297" y2="512.2891"/><rect fill="#FEFECE" filter="url(#fbaa4rwk21b9r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="8" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="15" y="43.1279">Client</text><rect fill="#FEFECE" filter="url(#fbaa4rwk21b9r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="53" x="8" y="511.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="39" x="15" y="531.2842">Client</text><rect fill="#FEFECE" filter="url(#fbaa4rwk21b9r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="171" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="178" y="43.1279">MQTT Server</text><rect fill="#FEFECE" filter="url(#fbaa4rwk21b9r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="103" x="171" y="511.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="89" x="178" y="531.2842">MQTT Server</text><rect fill="#FEFECE" filter="url(#fbaa4rwk21b9r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="355.5" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="362.5" y="43.1279">Event Handler</text><rect fill="#FEFECE" filter="url(#fbaa4rwk21b9r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="110" x="355.5" y="511.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="96" x="362.5" y="531.2842">Event Handler</text><rect fill="#FEFECE" filter="url(#fbaa4rwk21b9r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="588" y="23.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="595" y="43.1279">Thread Pool</text><rect fill="#FEFECE" filter="url(#fbaa4rwk21b9r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="588" y="511.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="595" y="531.2842">Thread Pool</text><rect fill="#FFFFFF" filter="url(#fbaa4rwk21b9r)" height="375.5938" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="31.5" y="89.5625"/><rect fill="#FFFFFF" filter="url(#fbaa4rwk21b9r)" height="434.8594" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="219.5" y="68.4297"/><rect fill="#FFFFFF" filter="url(#fbaa4rwk21b9r)" height="413.7266" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="407.5" y="89.5625"/><rect fill="#FFFFFF" filter="url(#fbaa4rwk21b9r)" height="275.1953" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="633.5" y="219.0938"/><polygon fill="#008000" points="240.5,85.5625,230.5,89.5625,240.5,93.5625,236.5,89.5625" style="stroke: #008000; stroke-width: 1.0;"/><line style="stroke: #008000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="234.5" x2="406.5" y1="89.5625" y2="89.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="38" x="246.5" y="84.4966">Listen</text><polygon fill="#A80036" points="207.5,114.6953,217.5,118.6953,207.5,122.6953,211.5,118.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="213.5" y1="118.6953" y2="118.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="48.5" y="113.6294">Client Connect</text><polygon fill="#A80036" points="395.5,143.8281,405.5,147.8281,395.5,151.8281,399.5,147.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229.5" x2="401.5" y1="147.8281" y2="147.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="236.5" y="142.7622">(forward) Client Connect</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="417.5" x2="459.5" y1="176.9609" y2="176.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="459.5" x2="459.5" y1="176.9609" y2="189.9609"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="418.5" x2="459.5" y1="189.9609" y2="189.9609"/><polygon fill="#A80036" points="428.5,185.9609,418.5,189.9609,428.5,193.9609,424.5,189.9609" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="424.5" y="171.895">Check availability</text><polygon fill="#A80036" points="621.5,215.0938,631.5,219.0938,621.5,223.0938,625.5,219.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="417.5" x2="627.5" y1="219.0938" y2="219.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="424.5" y="214.0278">Acquire/Create Thread for Task</text><polygon fill="#A80036" points="240.5,244.2266,230.5,248.2266,240.5,252.2266,236.5,248.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="632.5" y1="248.2266" y2="248.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="246.5" y="243.1606">ACK</text><polygon fill="#A80036" points="52.5,273.3594,42.5,277.3594,52.5,281.3594,48.5,277.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="46.5" x2="218.5" y1="277.3594" y2="277.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="58.5" y="272.2935">(forward) ACK</text><polygon fill="#A80036" points="207.5,302.4922,217.5,306.4922,207.5,310.4922,211.5,306.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="41.5" x2="213.5" y1="306.4922" y2="306.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="103" x="48.5" y="301.4263">Request Service</text><polygon fill="#A80036" points="621.5,331.625,631.5,335.625,621.5,339.625,625.5,335.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229.5" x2="627.5" y1="335.625" y2="335.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="236.5" y="330.5591">(forward) Request Service</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="643.5" x2="685.5" y1="364.7578" y2="364.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="685.5" x2="685.5" y1="364.7578" y2="377.7578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="644.5" x2="685.5" y1="377.7578" y2="377.7578"/><polygon fill="#A80036" points="654.5,373.7578,644.5,377.7578,654.5,381.7578,650.5,377.7578" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="650.5" y="359.6919">Process Task</text><polygon fill="#A80036" points="240.5,402.8906,230.5,406.8906,240.5,410.8906,236.5,406.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="234.5" x2="632.5" y1="406.8906" y2="406.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="93" x="246.5" y="401.8247">Return Service</text><polygon fill="#A80036" points="52.5,432.0234,42.5,436.0234,52.5,440.0234,48.5,436.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="46.5" x2="218.5" y1="436.0234" y2="436.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="154" x="58.5" y="430.9575">(forward) Return Service</text><polygon fill="#A80036" points="207.5,461.1563,217.5,465.1563,207.5,469.1563,211.5,465.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="36.5" x2="213.5" y1="465.1563" y2="465.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="43.5" y="460.0903">Client Close</text><polygon fill="#A80036" points="626.5,490.2891,636.5,494.2891,626.5,498.2891,630.5,494.2891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="229.5" x2="632.5" y1="494.2891" y2="494.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="236.5" y="489.2231">(forward) Client Close</text><!--MD5=[7fd08922203664755a2ea3d266a3a866]
@startuml SequenceDiagram
skinparam BackgroundColor #AliceBluegit


participant Client
participant "MQTT Server" as MqttServer
box Server
skinparam BackgroundColor grey
participant "Event Handler" as Server
participant "Thread Pool" as ThreadPool
end box

activate MqttServer

MqttServer <- -[#green]- - Server : Listen
activate Server

activate Client
Client -> MqttServer : Client Connect
MqttServer -> Server : (forward) Client Connect
Server -> Server : Check availability

Server -> ThreadPool : Acquire/Create Thread for Task
activate ThreadPool
ThreadPool -> MqttServer : ACK
MqttServer -> Client : (forward) ACK

Client -> MqttServer : Request Service
MqttServer -> ThreadPool : (forward) Request Service

ThreadPool -> ThreadPool : Process Task
ThreadPool -> MqttServer : Return Service
MqttServer -> Client : (forward) Return Service

Client -> MqttServer : Client Close
deactivate Client
MqttServer -> ThreadPool : (forward) Client Close
deactivate ThreadPool

@enduml

PlantUML version 1.2020.02(Sun Mar 01 11:22:07 CET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 21.0.6+7-Ubuntu-124.04.1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>